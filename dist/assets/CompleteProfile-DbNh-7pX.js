import{u as T,a as I,b as C,r as b,j as e,B as G,c as H,S as $}from"./index-G4zhL9fC.js";const W=()=>{const r=T(),m=I(),j=C(),w=new URLSearchParams(j.search),N=w.get("email"),p=w.get("role"),k=j.pathname==="/admin/complete-profile"?`/admin/complete-profile?email=${N}`:`/complete-profile?email=${N}`,[a,g]=b.useState({role:p,fullname:"",mobilenum:"",dob:"",gender:"",profile:null,profileUrl:"",occupation:"",referalsource:"",state:"",district:"",pincode:"",city:"",landmark:"",houseno:""}),[u,l]=b.useState(""),[P,S]=b.useState(!1),t=f=>{const{name:o,value:x,files:h}=f.target;if(o==="profile"){const c=h[0];c&&g({...a,profile:c,profileUrl:URL.createObjectURL(c)})}else g({...a,[o]:x})},F=async f=>{f.preventDefault();try{const{fullname:o,mobilenum:x,dob:h,gender:c,profile:O,occupation:R,referalsource:D,state:y,district:U,pincode:E,city:L,landmark:B,houseno:M}=a,s={fullname:"Please provide your Full Name.",mobilenum:"Please enter your Mobile Number.",dob:"Please specify your Date of Birth.",gender:"Please specify your Gender.",profile:"Profile image is required.",occupation:"Please enter your Occupation.",referalsource:"Please indicate your Referral Source.",state:"Please enter your State.",district:"Please provide your Pincode.",pincode:"Please provide your Pincode.",city:"Please enter your City.",landmark:"Please describe your Landmark.",houseno:"Please provide your House Number."};if(o.trim()==="")l(s.fullname);else if(x.trim()==="")l(s.mobilenum);else if(!h)l(s.dob);else if(!c)l(s.gender);else if(!O)l(s.profile);else if(R.trim()==="")l(s.occupation);else if(!D)l(s.referalsource);else if(y.trim()==="")l(s.state);else if(U.trim()==="")l(s.district);else if(E.trim()==="")l(s.pincode);else if(y.trim()==="")l(s.state);else if(L.trim()==="")l(s.city);else if(B.trim()==="")l(s.landmark);else if(M.trim()==="")l(s.houseno);else{const v=new FormData;Object.entries(a).forEach(([n,i])=>{v.append(n,i)});try{const n=await H.post(k,v),{data:i,status:d}=n;d===200&&(l(i.msg),m({type:"setJwt",payload:i.token}),S(!0),p=="admin"?setTimeout(()=>r("/admin/dashboard"),800):p=="agent"?setTimeout(()=>r("/agent/home"),800):setTimeout(()=>r("/"),800))}catch(n){if(n.response){const{data:i,status:d}=n.response;d===422?l(i.msg):d===500&&(r("/500"),console.log("Internal server error",n))}else r("/500"),console.log("No resonse from server",n)}}}catch(o){console.log("Error in complete handle submit",o)}};return u&&setTimeout(()=>l(""),2e3),e.jsx("div",{className:"bg-white w-[80%] min-h-[90%] h-auto shadow-box rounded-md",children:e.jsxs("form",{action:"",onSubmit:F,children:[e.jsxs("div",{className:"w-full h-52 flex",children:[e.jsxs("div",{className:"h-full flex-1 flex flex-col gap-3 pt-5 pl-12 pr-2",children:[e.jsxs("div",{className:"flex mt-5 justify-between",children:[e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Full Name"}),e.jsx("input",{value:a.fullname,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"fullname"})]}),e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Mobile Number"}),e.jsx("input",{value:a.mobilenum,onChange:t,spellCheck:!1,className:`h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem] [appearance:textfield]\r
             [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,type:"number",name:"mobilenum"})]})]}),e.jsxs("div",{className:"flex mt-5 justify-between",children:[e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"DOB"}),e.jsx("input",{value:a.dob,onChange:t,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",spellCheck:!1,type:"date",name:"dob"})]}),e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Gender"}),e.jsxs("select",{onChange:t,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",name:"gender",id:"",children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"h-full w-[16rem] flex justify-center gap-4 flex-col items-center",children:[e.jsx("div",{className:"h-36 border shadow-md  sm:w-32 w-24 mt-14 ",children:a.profileUrl&&e.jsx("img",{src:a.profileUrl,className:"h-full w-full",alt:""})}),e.jsxs("div",{className:"w-auto flex h-[2rem] items-center",children:[e.jsx("div",{className:"my-4 p-2 px-4 bg-cusOrange text-white font-poppins font-medium text-[.7rem] rounded-sm",children:"CHOOSE FILE"}),e.jsx("input",{onChange:t,accept:"image/*",className:"absolute opacity-0 w-24",type:"file",encType:"multipart/form-data",name:"profile"})]})]})]}),e.jsx("div",{className:"w-full h-auto",children:e.jsxs("div",{className:"h-full py-2 px-12 w-full",children:[e.jsxs("div",{className:"flex mt-5 justify-between",children:[e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Occupation"}),e.jsx("input",{value:a.occupation,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"occupation"})]}),e.jsxs("span",{className:"flex w-[49.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Referral Source"}),e.jsxs("select",{onChange:t,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",name:"referalsource",id:"",children:[" ",e.jsx("option",{value:"",children:"Referral Source"}),e.jsx("option",{value:"Online advertising",children:"Online advertising"}),e.jsx("option",{value:"Social media",children:"Social media"}),e.jsx("option",{value:"Search engine",children:"Search engine"}),e.jsx("option",{value:"Referral from a friend",children:"Referral from a friend or family member"}),e.jsx("option",{value:"Website/blog",children:"Website/blog"}),e.jsx("option",{value:"Print advertisement",children:"Print advertisement"})]})]})]}),e.jsxs("div",{className:"flex mt-5 justify-between",children:[e.jsxs("span",{className:"flex w-[41.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"State"}),e.jsx("input",{value:a.state,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"state"})]}),e.jsxs("span",{className:"flex w-[35.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"District"}),e.jsx("input",{value:a.district,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"district"})]}),e.jsxs("span",{className:"flex w-[21%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Pincode"}),e.jsx("input",{value:a.pincode,onChange:t,spellCheck:!1,className:`h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem] [appearance:textfield]\r
             [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,type:"number",name:"pincode"})]})]}),e.jsxs("div",{className:"flex mt-5 mb-7 justify-between",children:[e.jsxs("span",{className:"flex w-[33.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"City"}),e.jsx("input",{value:a.city,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"city"})]}),e.jsxs("span",{className:"flex w-[35.5%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"Landmark"}),e.jsx("input",{value:a.landmark,onChange:t,spellCheck:!1,className:"h-[2.4rem] w-full shadow-md border outline-none px-4 text-[.9rem]",type:"text",name:"landmark"})]}),e.jsxs("span",{className:"flex w-[26%] flex-col gap-2",children:[e.jsx("label",{htmlFor:"",className:"text-[.75rem] font-inter opacity-90",children:"House No"}),e.jsx("input",{value:a.houseno,onChange:t,spellCheck:!1,className:`h-[2.4rem] [appearance:textfield]\r
                  [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none w-full shadow-md border outline-none px-4 text-[.9rem]`,type:"number",name:"houseno"})]})]}),e.jsx("div",{className:"mt-4",children:u&&e.jsx(G,{type:P?"success":"error",msg:u})}),e.jsx("button",{className:"bg-cusOrange font-inter  mt-3 ease-in-out duration-200 active:scale-[.99] text-white shadow-box m-auto text-center p-2 w-full",children:"SUBMIT"})]})})]})})},A=()=>{const m=C().pathname==="/complete-profile"?"user":"admin";return e.jsxs("main",{className:"w-screen h-screen flex",children:[e.jsx($,{role:m}),e.jsx("div",{className:`h-full flex-1 ${m=="admin"?"bg-slate-200":"auth_bg"} w-[calc(100vw-320px)] flex justify-center items-center`,children:e.jsx(W,{})})]})};export{A as default};
