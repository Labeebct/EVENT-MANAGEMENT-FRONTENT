import{t as y,u as N,b as S,r as n,j as e,J as f,B as E,c as R,S as F}from"./index-0VBuVqps.js";const _=()=>{y();const h=/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,i=N(),w=S(),[p,g]=n.useState("");n.useEffect(()=>{const l=new URLSearchParams(w.search);g(l.get("email"))},[w.search]);const[m,s]=n.useState(""),[b,P]=n.useState(!1),[o,j]=n.useState({oldPassword:"",newPassword:"",confirmPassword:""}),d=l=>{const{name:c,value:a}=l.target;j({...o,[c]:a})},v=async l=>{l.preventDefault();const{oldPassword:c,newPassword:a,confirmPassword:u}=o;if(!c||!a||!u)s("Please fill all fields");else if(!h.test(a))s("Please provide a strong password");else if(a!=u)s("Password mismatch");else try{const t=await R.post(`/admin/reset-password?email=${p}`,{oldPassword:c,newPassword:a,confirmPassword:u}),{data:x,status:r}=t;r==200&&(s(x.msg),P(!0),setTimeout(()=>i("/admin/login"),800))}catch(t){if(t.response){const{data:x,status:r}=t.response;r==422||r==409||r==401||r==404?s(x.msg):(i("/500"),console.log("Invalid responce from server",t))}else i("/500"),console.log("No response from server",t)}};return m&&setTimeout(()=>s(""),2e3),e.jsxs("div",{className:"w-[35%] min-w-[290px] bg-white  flex flex-col items-center translate-y-5 h-auto pb-2 rounded-md box_shadow_black",children:[e.jsx("h3",{className:"text-[2rem] font-playfair mt-7",children:"Reset password"}),e.jsxs("form",{onSubmit:v,className:"w-full text-black h-full flex  flex-col items-center  px-[2rem] py-9 gap-4 flex-1",children:[e.jsxs("div",{className:"w-full h-auto flex flex-col mt-5 gap-1",children:[e.jsx("label",{htmlFor:"email",className:"font-roboto text-[gray] text-[.8rem]",children:"Old Password"}),e.jsx(f,{handleChange:d,name:"oldPassword",value:o.oldPassword}),e.jsx("label",{htmlFor:"email",className:"font-roboto mt-3 text-[gray] text-[.8rem]",children:"New Password"}),e.jsx(f,{handleChange:d,name:"newPassword",value:o.newPassword}),e.jsx("label",{htmlFor:"email",className:"font-roboto mt-3 text-[gray] text-[.8rem]",children:"Confirm Password"}),e.jsx(f,{handleChange:d,name:"confirmPassword",value:o.confirmPassword})]}),e.jsx("p",{className:"text-center mt-1 text-[.7rem] mb-2 font-roboto opacity-70",children:"Password should contain minimum 8 character with one capital letter, one number and a special character"}),m&&e.jsx(E,{type:b?"success":"error",msg:m}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-2 font-roboto bg-cusOrange tracking-wider active:scale-[.96] ease-out duration-100 top-[21rem] right-24 text-white cursor-pointer",children:"Submit"})]})]})},k=()=>e.jsxs("main",{className:"w-screen h-screen flex",children:[e.jsx(F,{role:"admin"}),e.jsx("div",{className:"h-full flex-1 bg-slate-200 admin_auth_bg w-[calc(100vw-320px)] flex justify-center items-center",children:e.jsx(_,{})})]});export{k as default};
