import{n as d,u as f,r as i,j as e,E as x,c as u,a as g,d as p}from"./index-MJovpXgz.js";import{d as h}from"./Close-F80iJTsu.js";const b=({data:t})=>{const n=d(),a=f(),[l,c]=i.useState(!0),o=()=>{x({title:"Confirm to remove the message",message:"Are you sure you want to remove the message?",titleClassName:"text-xl font-inter font-bold text-green-500",buttons:[{label:"Yes",style:{backgroundColor:"#65B741"},className:"text-white font-bold py-2 px-4 rounded mr-2",onClick:async()=>{try{const s=await u.delete(`/admin/remove-message?id=${t._id}`),{status:r}=s;r==200&&(c(!1),n("success","Message has been deleted."))}catch(s){if(s.response){const{data:r,status:m}=s.response;m==404?(a("/404"),console.log(r.error)):a("/500")}else console.log("No response from server",s),a("/500")}}},{label:"No",style:{backgroundColor:"#D80032"},className:"bg-green-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded mr-2"}],overlayClassName:"fixed inset-0 bg-[black] bg-opacity-20 flex justify-center items-center"})};return l?e.jsxs("div",{className:"flex-1 pb-5  relative flex items-center p-4 min-h-[11rem] h-auto w-auto bg-white",children:[e.jsxs("div",{className:"flex flex-col gap-2 items-start w-full justify-center h-full px-5",children:[e.jsxs("p",{class:"text-[.98rem] font-bold mt-3 font-roboto",children:["Name: ",t.username]}),e.jsxs("p",{class:"text-[.8rem] text-center font-inter  font-bold",children:["Subject: ",t.subject]}),e.jsxs("p",{class:"text-[.8rem] text-center font-inter  font-bold",children:["Role: ",t.role]}),e.jsxs("p",{class:"text-[.8rem] text-center font-roboto",children:["Email: ",t.email]}),e.jsxs("p",{class:"text-[.8rem] font-roboto",children:["Message: ",t.message]})]}),e.jsx("button",{onClick:o,className:"p-1 absolute top-2 right-2 text-white text-[.7rem] duration-100 active:scale-[.95] ease-in-out rounded-[3rem] bg-red-600",children:e.jsx(h,{sx:{fontSize:"18px"}})})]}):null},j=()=>{const t=f(),[n,a]=i.useState([]),l=g(),c=p(o=>o.sort);return i.useEffect(()=>{(async()=>{try{l({type:"loading",payload:!0});const s=await u.get("/admin/messages");l({type:"loading",payload:!1});const{data:r}=s;a(r.messages)}catch(s){if(s.response){const{data:r,status:m}=s.response;m==500&&(console.log(r.error),t("/500"))}else t("/500")}})()},[]),i.useEffect(()=>{a(c)},[c]),n.length==0?e.jsx("div",{className:"h-full w-full flex justify-center items-center",children:e.jsx("h3",{className:"text-[1.3rem] mb-24 font-semibold font-inter",children:"No messages Left"})}):e.jsx("div",{className:"w-full p-3 px-4 h-auto flex flex-col gap-3",children:n.map(o=>e.jsx(b,{data:o},o._id))})},N=()=>e.jsx(j,{});export{N as default};
