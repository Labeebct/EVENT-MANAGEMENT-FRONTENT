import{t as f,u as h,r as m,j as e,B as g,c as b,S as w}from"./index-0VBuVqps.js";const y=()=>{f();const d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=h(),[n,a]=m.useState(""),[x,u]=m.useState(!1),p=async i=>{i.preventDefault();try{const{email:r,secretkey:c}=i.target;if(!r.value.trim()||!c.value.trim())a("Please fill all fields");else if(!d.test(r.value))a("Invalid email format");else try{const s=await b.post("/admin/forget-password",{email:r.value,secretkey:c.value}),{data:o,status:t}=s;t==200&&(a(o.msg),u(!0),setTimeout(()=>l(`/admin/reset-password?email=${o.email}`),800))}catch(s){if(s.response){const{data:o,status:t}=s.response;t==422||t==404||t==401?a(o.msg):t==500&&(l("/500"),console.log("Invalid response",s))}else l("/500"),console.log("No response from the server",s)}}catch(r){console.log("Error in forget password handlesubmit",r)}};return n&&setTimeout(()=>a(""),2e3),e.jsxs("div",{className:"w-[35%] min-w-[290px] bg-white flex flex-col items-center translate-y-5 h-auto rounded-md box_shadow_black",children:[e.jsx("h3",{className:"text-[1.7rem] font-playfair mt-9",children:"Forget password"}),e.jsx("h3",{className:"mt-7 font-roboto opacity-85 text-[.9rem] text-center px-10",children:"Entered your registered email address and the secret key to reset the password."}),e.jsxs("form",{onSubmit:p,className:"w-full text-black h-full flex  flex-col items-center  px-[2rem] py-9 gap-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"email",className:"font-roboto text-[gray] text-[.75rem]",children:"Email"}),e.jsx("input",{spellCheck:!1,type:"text",name:"email",className:"h-[2.5rem] border outline-none px-3 mb-2 text-[.9rem] border-[#39393948] drop-shadow-sm"}),e.jsx("label",{htmlFor:"email",className:"font-roboto text-[gray] text-[.75rem]",children:"Secret Password"}),e.jsx("input",{spellCheck:!1,type:"password",name:"secretkey",placeholder:"XXXX XXXX XXXX",maxLength:12,className:"h-[2.5rem] border outline-none px-3 mb-2 text-[.9rem] border-[#39393948] drop-shadow-sm"})]}),n&&e.jsx(g,{type:x?"success":"error",msg:n}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-2 font-roboto bg-cusOrange tracking-wider active:scale-[.96] ease-out duration-100 top-[21rem] right-24 text-white cursor-pointer",children:"Submit"}),e.jsx("button",{type:"button",onClick:()=>l("/admin/login"),className:"p-2  text-black text-[.9rem]",children:"BACK"})]})]})},v=()=>e.jsxs("main",{className:"w-screen h-screen flex",children:[e.jsx(w,{role:"admin"}),e.jsx("div",{className:"h-full flex-1 bg-slate-200 admin_auth_bg w-[calc(100vw-320px)] flex justify-center items-center",children:e.jsx(y,{})})]});export{v as default};
